const markusjx={debug:!1,Bubble:class{constructor(element){this.root=element;let heading_list=element.getElementsByClassName("bubble-heading");if(1!=heading_list.length)throw new Error("Invalid bubble element");this.headingElement=heading_list[0];let text_list=element.getElementsByClassName("bubble-text");if(1!=text_list.length)throw new Error("Invalid bubble element");if(this.textElement=text_list[0],this.buttonElements=element.getElementsByClassName("bubble-button"),this.buttonElements.length<1)throw new Error("Invalid bubble element");for(let i=0;i<this.buttonElements.length;i++)new mdc.ripple.MDCRipple(this.buttonElements[i]),this.buttonElements[i].addEventListener("click",e=>{let res={value:this.buttonElements[i].innerText,event:e};this.root.style.opacity="0",this.open=!1,this.currentElementBinding=null,this.closeListeners.forEach(fn=>{fn(res)})});let pointer_list=element.getElementsByClassName("bubble-pointer");if(1!=pointer_list.length)throw new Error("Invalid bubble element");this.pointerElement=pointer_list[0],this.closeListeners=[],this.openListeners=[],this.open=!1,this.currentElementBinding=null,this.reopenTimeout=null,window.addEventListener("resize",()=>{markusjx.debug&&console.debug("resize"),this.root.style.opacity="0",this.open&&(null!==this.reopenTimeout&&clearTimeout(this.reopenTimeout),this.reopenTimeout=setTimeout(()=>{null!==this.currentElementBinding&&this.updatePosition()},200))})}setHeading(text){this.headingElement.innerHTML=text,this.pointerElement.style.top=root.offsetHeight+"px",this.pointerElement.style.left=(root.offsetWidth-this.pointerElement.offsetWidth)/2+"px"}setText(text){this.textElement.innerHTML=text,this.pointerElement.style.top=root.offsetHeight+"px",this.pointerElement.style.left=(root.offsetWidth-this.pointerElement.offsetWidth)/2+"px"}listen(event,callback){if("Bubble:closed"===event)this.closeListeners.push(callback);else{if("Bubble:opened"!=event)throw new Error("Unknown event");this.openListeners.push(callback)}}unlisten(event,callback){if("Bubble:closed"===event){let index=this.closeListeners.indexOf(callback);if(-1===index)throw new Error("Unknown callback function");this.closeListeners.splice(index,1)}else{if("Bubble:opened"!=event)throw new Error("Unknown event");{let index=this.openListeners.indexOf(callback);if(-1===index)throw new Error("Unknown callback function");this.openListeners.splice(index,1)}}}isOpened(){return this.open}updatePosition(){if(!this.open||null===this.currentElementBinding)throw new Error("Could not update the element's position");this.show(this.currentElementBinding)}close(){let res={value:null,event:e};this.root.style.opacity="0",this.root.style.display="none",this.open=!1,this.currentElementBinding=null,this.closeListeners.forEach(fn=>{fn(res)})}show(element,offsetLeft=0){let root=this.root;function getOffsetLeft(elem){let offsetLeft=0;do{isNaN(elem.offsetLeft)||(offsetLeft+=elem.offsetLeft)}while(elem=elem.offsetParent);return offsetLeft}function getOffsetTop(elem){let offsetTop=0;do{isNaN(elem.offsetTop)||(offsetTop+=elem.offsetTop)}while(elem=elem.offsetParent);return offsetTop}let elem_left=getOffsetLeft(element),elem_top=getOffsetTop(element),vh=Math.max(document.documentElement.clientHeight||0,window.innerHeight||0),vw=Math.max(document.documentElement.clientWidth||0,window.innerWidth||0);function canPlaceAbove(){return elem_top>root.offsetHeight}function canPlaceBelow(){return vh-(elem_top+element.offsetHeight)>root.offsetHeight}function canPlaceLeft(){return elem_left>root.offsetWidth}function canPlaceRight(){return vw-(elem_left+element.offsetWidth)>root.offsetWidth}if(Number(window.getComputedStyle(root).maxWidth.replace("px",""))<vw)root.style.width=root.style.maxWidth;else{if(!(Number(window.getComputedStyle(root).minWidth.replace("px",""))<vw))return root.style.opacity="0",void console.error("Cannot display bubble: Not enough space");root.style.width="100%"}if(this.pointerElement.className="bubble-pointer",canPlaceAbove())markusjx.debug&&console.debug("Placing above"),root.style.top=elem_top-root.offsetHeight-20+"px",root.style.left=elem_left+offsetLeft-Math.max(root.offsetWidth+elem_left+offsetLeft+15-vw,0)+"px",this.pointerElement.classList.add("bottom"),this.pointerElement.style.top=root.offsetHeight+"px",this.pointerElement.style.left=Math.abs(elem_left-getOffsetLeft(root))+element.offsetWidth/2-this.pointerElement.offsetWidth/2-offsetLeft+"px";else if(canPlaceBelow())markusjx.debug&&console.debug("Placing below"),root.style.top=elem_top+element.offsetHeight+20+"px",root.style.left=elem_left+offsetLeft-Math.max(root.offsetWidth+elem_left+offsetLeft+15-vw,0)+"px",this.pointerElement.style.top="0",this.pointerElement.style.left=Math.abs(elem_left-getOffsetLeft(root))+element.offsetWidth/2-this.pointerElement.offsetWidth/2-offsetLeft+"px";else if(canPlaceLeft())markusjx.debug&&console.debug("Placing left"),Number(root.style.maxWidth.replace("px",""))>elem_left?root.style.width=root.style.maxWidth:root.style.width="100%",root.style.top=elem_top+"px",root.style.left=elem_left-root.offsetWidth-20+"px",this.pointerElement.classList.add("right"),this.pointerElement.style.top=(root.offsetHeight-this.pointerElement.offsetHeight)/2+"px",this.pointerElement.style.left="0px";else{if(!canPlaceRight())throw new Error("Could not find a suitable location to put element");markusjx.debug&&console.debug("Placing right"),Number(root.style.maxWidth.replace("px",""))>vw-elem_left?root.style.width=root.style.maxWidth:root.style.width="100%",root.style.top=elem_top+"px",root.style.left=elem_left-root.offsetWidth-20+"px",this.pointerElement.classList.add("right"),this.pointerElement.style.top=elem_left+element.offsetWidth+20+"px",this.pointerElement.style.left=root.offsetWidth+"px"}this.root.style.display="block",root.style.opacity="1",this.currentElementBinding=element,this.open=!0,this.openListeners.forEach(fn=>{fn()})}}};